{% extends 'registration/head2.html' %}
{% block conteudo %}  

<link rel="preconnect" href="https://www.google.com">
<link rel="preconnect" href="https://www.gstatic.com" crossorigin> 
<script type="text/javascript">
    var onloadCallback = function() {
      grecaptcha.render('html_element', {
        'sitekey' : '6LdiIsweAAAAAKHnfIgGx1V-olIVbAFEBUJY5MHb',
      });
    };
  </script>
                    <h2>CADASTRO</h2>                    
                    <form method="POST" id="formulario" data-estados-url="{% url 'contas:ajax_load_estados' %}" data-cidades-url="{% url 'contas:ajax_load_cidades' %}" novalidate>
                        {% csrf_token %}
                        {% if robo %}
                            <div class="row px-2">
                                <div class="col d-flex bg-danger  px-5 py-2 rounded mb-3">
                                    <div class="mx-auto text-white ">
                                        <b>Não aceitamos robôs</b>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                        <div class="form-row">
                            <div class="form-group col-md-3">            
                                <label for="id_nome">Nome:</label>
                                <input class="form-control {% if not validations.nome.state %}is-invalid{% endif %}" onblur="validar(event)" type="text" name="nome" maxlength="60" required id="id_nome" value="{{nome}}">
                                <div class="invalid-feedback">
                                    {{validations.nome.msg}}
                                </div> 
                            </div>
                            <div class="form-group col-md-2">              
                                <label for="id_cpf">CPF:</label>
                                <input class="form-control {% if not validations.cpf.state %}is-invalid{% endif %}" onblur="validar(event)" type="text" name="cpf" onkeydown="mascara(this,icpf)" maxlength="14" required id="id_cpf" value="{{cpf}}">            
                                <div class="invalid-feedback">
                                    {{validations.cpf.msg}}
                                </div> 
                            </div>
                            <div class="form-group col-md-3"> 
                                <label for="id_email">Email:</label>
                                <input class="form-control {% if not validations.email.state %}is-invalid{% endif %}" onblur="validar(event)" type="text" name="email" maxlength="200" required id="id_email" value="{{email}}">
                                <div class="invalid-feedback">
                                    {{validations.email.msg}}
                                </div> 
                            </div>
                            <div class="form-group col-md-2"> 
                                <label for="id_celular">Celular:</label>
                                <input class="form-control {% if not validations.celular.state %}is-invalid{% endif %}" onblur="validar(event)" type="text" name="celular" onkeydown="mascara(this,icelular)" onload="mascara(this,icelular)" value="{{celular}}"
                                        maxlength="15" required id="id_celular">
                                <div class="invalid-feedback">
                                    {{validations.celular.msg}}
                                </div> 
                            </div>
                            <div class="form-group col-md-2"> 
                                <label for="id_telefone">Telefone:</label>
                                <input class="form-control {% if not validations.telefone.state %}is-invalid{% endif %}" onblur="validar(event)" type="text" name="telefone" onkeydown="mascara(this,itelefone)" onload="mascara(this,itelefone)"
                                        value="{{telefone}}" maxlength="14" id="id_telefone">
                                <div class="invalid-feedback">
                                    {{validations.telefone.msg}}
                                </div> 
                            </div>
                        </div>
                        <div class="form-row">                            
                        
                            <div class="form-group col-md-2"> 
                                <label for="id_estado">Estado:</label>
                                <select class="form-control {% if not validations.estado.state %}is-invalid{% endif %}" onchange="mostracidade(event)" name="estado" class="selEstado" required id="id_estado">
                                    <option value="" {%if estado_ == '' %}selected{% endif %}></option>
                                    {% for estado in estados %}
                                    <option value="{{ estado.id }}" {% if estado.nome == estado_.nome %}selected{% endif %}>{{ estado.nome }}</option>
                                    {% endfor %}
                                </select>
                                <div class="invalid-feedback">
                                    {{validations.estado.msg}}
                                </div> 
                            </div>
                            <div class="form-group col-md-4"> 
                                <label for="id_cidade">Cidade:</label>
                                <select class="form-control {% if not validations.cidade.state %}is-invalid{% endif %}" name="cidade" required id="id_cidade">
                                    <option value="{{cidade.id}}" selected>{{cidade.nome}}</option>
                                </select>
                                <div class="invalid-feedback">
                                    {{validations.cidade.msg}}
                                </div> 
                            </div>
                            <div class="form-group col-md-2">                             
                                <label for="id_senha">Senha:</label>
                                <input class="form-control {% if not validations.senha.state %}is-invalid{% endif %}" onblur="validar(event)" type="password" name="senha" required id="id_senha">
                            </div>
                            <div class="form-group col-md-2">                             
                                <label for="id_senha_confirma">Confirme senha:</label>
                                <input class="form-control {% if not validations.senha.state %}is-invalid{% endif %}" onblur="validar(event)" type="password" name="senha_confirma" required id="id_senha_confirma">
                                <div class="invalid-feedback">
                                    {{validations.senha.msg}}
                                </div> 
                            </div>
                        </div>
                        <div class="form-row d-flex flex-column">                                  
                            <div id="html_element" class="m-auto"></div>                            
                        </table>    
                        <button class="btn btn-primary" type="submit">
                            Cadastrar
                        </button>

                    </form>
                    <a href="{% url 'login' %}">Voltar</a>  
                    <script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit"
                    async defer>
                </script>  
                <style>
                    #rc-anchor-container{
                        width: 100% !important;
                    }
                </style>            
                {% endblock %}